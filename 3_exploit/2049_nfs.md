# Exploit

Try to interact with the NFS to try and add/delete.

## Root Squashing

An option that can be set or not on the NFS drive which prevents a remote root user from having root access to the network file system. If you're root on the non-NFS system and access a NFS that doesn't have root Squashing turned on, then NFS drive allows root access. If root Squashing is turned on, then you are assigned the NFSNOBODY account upon connetion to the NFS drive. We can escalate to root through the following methods if root squashing is disabled.

### SUID Program

1. Attacker mounts the NFS volume to their computer.
2. Attacker creates a malicious executable that when run, sets the current user to root.
3. Attacker adds the suid bit to the executable so anyone running the executable runs it as root.
4. Attacker logs into the remote system as a non-privileged user.
5. Attacker runs the malicious executable and gains root access.

### Change passwd

If we have misconfigured access to the file share, then we can add and remove files to the /etc/passwd/ file on the target machine to create new users and reassign privileges.

## NFS Hardlink

A lot of conditions need to be met for this vector to work but it allows access to files outside of the intended NFS directory when exploited. Root Squashing is enabled for this attack Vector. [NFS Hardlink Tutorial](http://pentestmonkey.net/blog/nfs-hardlink)

